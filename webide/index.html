<html>

  <head>
    <title>PJS WEB IDE</title>
    <script src="../processing.js" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css" />
    <script>var p = null;</script>
  </head>
  
  <body onload="runIt();">
    <h1><a href="http://asalga.wordpress.com">Andor Salga</a></h1>
    <h2>PJS WEB IDE</h2>

    <p>
      This seems to work with <a href="http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/">Minefield</a> and <a href="http://nightly.webkit.org/">Webkit</a>, but not <a href="http://build.chromium.org/buildbot/snapshots/">Chromium</a><br />
      <br />
      Make changes to the sketch source on the left and click the button on the bottom<br />
      to update the canvas. Keep in mind not all 3D functionality has been implemented and<br />
      there are still some bugs...<br />
    </p>

    <table>
      <tr>
        <td>
          <textarea id="source" rows="30" cols="30%">
float r = 0;

void setup()
{
  // Don't modify this...
  size(500,500,OPENGL);
}

void draw()
{
  camera();
  background(33,66,99);

  translate(250,270,380);
  rotateY(r += 0.01);
  
  strokeWeight(1);

  for(int i = 0; i < 15; i++)
  {
    fill(i * 10, 1, 1);
    noStroke();
    pushMatrix();
    translate(i-7,-3,0);
    translate(0,sin(frameCount/5 + i),0);
    rotateX(i/10 + frameCount/20);
    box(1,1,3);
    popMatrix();
  }
  
  stroke(50,200,100);
  noFill();
  strokeWeight(3);
  box(13,1,13);
}</textarea>
        </td>

        <td>
          <canvas id="display" width="500" height="500"></canvas>
        </td>

      </tr>
      <tr>
        <td style="border:0px;" align="center"><input type="button" onclick="runIt();" value= "Double Compile!"/></td>
        <td style="border:0px;"></td>
      </tr>
    </table>

    <script type="text/javascript">
      function runIt()
      {
        if(p)
        {
          p.exit();
          delete p;
        }

        p = Processing(display,source.value);
      }
    </script>

    <br />
    <br />
    <br />
  </body>
</html>