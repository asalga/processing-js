import processing.opengl.*;
/* @pjs preload="crate.jpg" */

float r  = 0.0;
PImage tex;

void setup() 
{
  size(640, 360, OPENGL);
  tex = loadImage("crate.jpg");
  //textureMode(NORMALIZED);
  println(tex.get(55,66));
}

void draw() 
{
  background(0);
  noStroke();
pushMatrix();
  translate(width/2.0, height/2.0, 250);
rotateY(r+=0.01);
rotateZ(r+= 0.01);
  scale(100 + 20*sin(frameCount/10) );

fill(140,120);
  beginShape(QUADS);
  texture(tex);

  // -Z "back" face
  vertex( 1, -1, -1, 0, 0);
  vertex(-1, -1, -1, 1, 0);
  vertex(-1,  1, -1, 1, 1);
  vertex( 1,  1, -1, 0, 1);


  vertex(-1, -1,  1, 0, 0);
  vertex( 1, -1,  1, 1, 0);
  vertex( 1,  1,  1, 1, 1);
  vertex(-1,  1,  1, 0, 1);



  // +Y "bottom" face
  vertex(-1,  1,  1, 0, 0);
  vertex( 1,  1,  1, 1, 0);
  vertex( 1,  1, -1, 1, 1);
  vertex(-1,  1, -1, 0, 1);

  // -Y "top" face
  vertex(-1, -1, -1, 0, 0);
  vertex( 1, -1, -1, 1, 0);
  vertex( 1, -1,  1, 1, 1);
  vertex(-1, -1,  1, 0, 1);

  // +X "right" face
  vertex( 1, -1,  1, 0, 0);
  vertex( 1, -1, -1, 1, 0);
  vertex( 1,  1, -1, 1, 1);
  vertex( 1,  1,  1, 0, 1);

  // -X "left" face
  vertex(-1, -1, -1, 0, 0);
  vertex(-1, -1,  1, 1, 0);
  vertex(-1,  1,  1, 1, 1);
  vertex(-1,  1, -1, 0, 1);

  endShape();
popMatrix();


fill(244,0,0);
translate(width/2 +40,height/2,190);
box(30);
}